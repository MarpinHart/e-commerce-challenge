(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a(57)},35:function(e,t,a){},36:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(20),c=a.n(l),i=(a(35),a(36),a(21)),s=a(27),o=a(22),m=a(23),u=a(28),d=a(24),h=a(7),p=a(29),C=a(25),f=a.n(C).a.create({baseURL:"/api",withCredentials:!0}),v=function(e){if(console.error(e),e.response&&e.response.data)throw console.error("API response",e.response.data),e.response.data.message;throw e},E=function(){return f.get("/products").then(function(e){return e.data}).catch(v)},g=function(e){return f.post("/user",e).then(function(e){return e}).catch(v)},I=function(e){return f.post("/orders",e).then(function(e){return e}).catch(v)},w=a(58),b=function(e){e.id;var t=e.title,a=e.description,n=e.image,l=e.price,c=e.handleAddCart;return r.a.createElement("div",{className:"ProductCard"},r.a.createElement("div",{className:"card"},r.a.createElement("img",{src:n,className:"product-image",alt:"missing"}),r.a.createElement("div",{className:"title-description-card"},r.a.createElement("h5",{className:""},t),r.a.createElement("p",{className:""},a),r.a.createElement(w.a,{className:"button",onClick:c},"Button")),r.a.createElement("h2",{className:"price-card"},l)))},k=a(59),N=a(60),y=a(61),O=a(62),S=a(63),F=function(e){var t=e.email,a=e.handleInputChange,n=e.handleCompleteCart,l=e.isEmailCorrect;return r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement(N.a,null,r.a.createElement(y.a,{type:"email",name:"email",value:t,valid:l,invalid:t.length>0&&!l,placeholder:"Insert Email",onChange:a}),r.a.createElement(O.a,null," This is not a valid email "),r.a.createElement(S.a,{addonType:"prepend"},r.a.createElement(w.a,{onClick:n},"Confirm")),r.a.createElement(O.a,{valid:!0}))))},j=function(e){var t=e.title,a=e.price,n=e.deleteItemFromCart,l=e.index;return r.a.createElement("div",{className:"CartItem"},r.a.createElement(w.a,{color:"danger",size:"sm",onClick:function(e){return n(e,l)}},"X"),r.a.createElement("h6",null,t),r.a.createElement("h6",null,a))},A=function(e){var t=e.cart,a=e.email,n=e.completed,l=e.handleCompleteCart,c=e.handleCompleteOrder,i=e.handleInputChange,s=e.isEmailCorrect,o=e.deleteItemFromCart,m=0;return r.a.createElement("div",{className:"ShoppingCart"},r.a.createElement("h1",null,"Shopping Cart"),r.a.createElement("hr",null),r.a.createElement("div",{className:"shopping-list"},0===t.length&&r.a.createElement("h6",null,"Please insert products"),t.map(function(e,t){return r.a.createElement(j,{index:t,title:e.title,price:e.price,deleteItemFromCart:o})})),r.a.createElement("hr",null),t.map(function(e){m+=parseFloat(e.price.substring(0,e.price.length-1))}),r.a.createElement("h4",null,"Total: ",m.toFixed(2).toString()," \u20ac"),r.a.createElement("hr",null),r.a.createElement(F,{email:a,handleInputChange:i,handleCompleteCart:l,isEmailCorrect:s}),r.a.createElement(w.a,{onClick:c,className:n?"active complete-button":"disabled complete-button"}," Complete Order "))},D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={filter:"",allItems:[],cartItems:[],email:"",user:{},search:"",completed:!1,total:"",successful:!1},a.deleteItemFromCart=a.deleteItemFromCart.bind(Object(h.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"handleAddCart",value:function(e,t){e.preventDefault(),this.setState(function(e){return{cartItems:[].concat(Object(s.a)(e.cartItems),[t])}}),console.log(this.state.cartItems)}},{key:"handleCompleteCart",value:function(e){var t=this;e.preventDefault();var a=this.state.email;g({email:a}).then(function(e){t.setState({completed:!0,user:e.data})})}},{key:"handleInputChange",value:function(e){this.setState(Object(i.a)({},e.target.name,e.target.value))}},{key:"handleSearchInput",value:function(e){this.setState({search:e})}},{key:"handleCompleteOrder",value:function(e){e.preventDefault();var t=this.state.user._id,a=this.state.cartItems.map(function(e){return e._id});I({_user:t,_products:a}).then(function(e){return console.log(e)}),this.setState({successful:!0})}},{key:"deleteItemFromCart",value:function(e,t){console.log(t),e.preventDefault(),this.setState({cartItems:this.state.cartItems.filter(function(e,a){return a!==t})})}},{key:"isEmailCorrect",value:function(){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(this.state.email).toLowerCase())}},{key:"render",value:function(){var e=this,t=this.state.search.toLowerCase();return r.a.createElement("div",{className:"ProductList"},r.a.createElement(A,{cart:this.state.cartItems,completed:this.state.completed,email:this.state.email,deleteItemFromCart:this.deleteItemFromCart,handleCompleteCart:function(t){return e.handleCompleteCart(t)},handleCompleteOrder:function(t){return e.handleCompleteOrder(t)},handleInputChange:function(t){return e.handleInputChange(t)},isEmailCorrect:this.isEmailCorrect()}),r.a.createElement("div",{className:"right-page"},r.a.createElement(y.a,{name:"filter",placeholder:"Filter the seach",value:this.state.search,onChange:function(t){return e.handleSearchInput(t.target.value)}}),r.a.createElement("div",{className:"right-page-scroll"},this.state.allItems.filter(function(e){return e.title.toLowerCase().includes(t)}).map(function(t){return r.a.createElement(b,{id:t._id,title:t.title,description:t.description,image:t.imageUrl,price:t.price,handleAddCart:function(a){return e.handleAddCart(a,t)}})}))))}},{key:"componentDidMount",value:function(){var e=this;E().then(function(t){e.setState({allItems:t}),console.log(e.state.allItems,"state")})}}]),t}(n.Component);var L=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(D,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(56);c.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[30,1,2]]]);
//# sourceMappingURL=main.16080d2b.chunk.js.map